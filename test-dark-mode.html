<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dark Mode Test - Sando Design System</title>

  <!-- Import Ingredients -->
  <link rel="stylesheet" href="./packages/tokens/dist/sando-tokens/css/ingredients/color.css">
  <link rel="stylesheet" href="./packages/tokens/dist/sando-tokens/css/ingredients/space.css">
  <link rel="stylesheet" href="./packages/tokens/dist/sando-tokens/css/ingredients/font.css">

  <!-- Import Flavors (all modes) -->
  <link rel="stylesheet" href="./packages/tokens/dist/sando-tokens/css/flavors/original/flavor.css">
  <link rel="stylesheet" href="./packages/tokens/dist/sando-tokens/css/flavors/original/flavor-dark.css">
  <link rel="stylesheet" href="./packages/tokens/dist/sando-tokens/css/flavors/original/flavor-high-contrast.css">
  <link rel="stylesheet" href="./packages/tokens/dist/sando-tokens/css/flavors/original/flavor-forced-colors.css">
  <link rel="stylesheet" href="./packages/tokens/dist/sando-tokens/css/flavors/original/flavor-motion-reduce.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--sando-font-family-sans);
      background: var(--sando-color-background-base);
      color: var(--sando-color-text-body);
      padding: var(--sando-space-8);
      transition: background 0.2s, color 0.2s;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }


    .card {
      background: var(--sando-color-background-raised);
      padding: var(--sando-space-6);
      border-radius: 12px;
      margin-bottom: var(--sando-space-4);
      border: 1px solid var(--sando-color-border-default);
    }

    h1 {
      color: var(--sando-color-text-heading);
      font-size: var(--sando-font-size-700);
      margin-bottom: var(--sando-space-4);
    }

    h2 {
      color: var(--sando-color-text-heading);
      font-size: var(--sando-font-size-500);
      margin-bottom: var(--sando-space-3);
    }

    p {
      color: var(--sando-color-text-body);
      line-height: var(--sando-font-lineHeight-body);
      margin-bottom: var(--sando-space-2);
    }

    .caption {
      color: var(--sando-color-text-caption);
      font-size: var(--sando-font-size-caption);
    }

    .info-banner {
      padding: var(--sando-space-4);
      background: var(--sando-color-background-emphasis);
      border-radius: 8px;
      margin-top: var(--sando-space-6);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Automatic Mode Detection Test</h1>

    <div class="card">
      <h2>System Mode</h2>
      <p id="current-mode">Detecting...</p>
      <p class="caption">Change your system theme settings to see automatic mode switching</p>
      <p class="caption" style="margin-top: var(--sando-space-2);">
        <strong>Windows:</strong> Settings → Personalization → Colors<br>
        <strong>macOS:</strong> System Preferences → General → Appearance<br>
        <strong>Linux:</strong> Varies by desktop environment
      </p>
    </div>

    <div class="card">
      <h2>Background Colors</h2>
      <p>Base: <code id="bg-base">-</code></p>
      <p>Surface: <code id="bg-surface">-</code></p>
      <p>Raised: <code id="bg-raised">-</code></p>
    </div>

    <div class="card">
      <h2>Text Colors</h2>
      <p>Heading: <code id="text-heading">-</code></p>
      <p>Body: <code id="text-body">-</code></p>
      <p class="caption">Caption: <code id="text-caption">-</code></p>
    </div>

    <div class="info-banner">
      <strong>ℹ️ How it works:</strong>
      <ul>
        <li><strong>Automatic Detection:</strong> Uses @media (prefers-color-scheme: dark)</li>
        <li><strong>No Manual Override:</strong> Modes respect system preferences for accessibility</li>
        <li><strong>Real-time Updates:</strong> Changes when you switch system theme</li>
      </ul>
    </div>
  </div>

  <script>
    function detectSystemMode() {
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return 'Dark Mode (System Preference)';
      } else if (window.matchMedia('(prefers-color-scheme: light)').matches) {
        return 'Light Mode (System Preference)';
      } else {
        return 'No Preference (Defaults to Light)';
      }
    }

    function updateColors() {
      const root = document.documentElement;
      const styles = getComputedStyle(root);

      // Update mode display
      document.getElementById('current-mode').textContent = detectSystemMode();

      // Update color tokens
      document.getElementById('bg-base').textContent = styles.getPropertyValue('--sando-color-background-base');
      document.getElementById('bg-surface').textContent = styles.getPropertyValue('--sando-color-background-surface');
      document.getElementById('bg-raised').textContent = styles.getPropertyValue('--sando-color-background-raised');
      document.getElementById('text-heading').textContent = styles.getPropertyValue('--sando-color-text-heading');
      document.getElementById('text-body').textContent = styles.getPropertyValue('--sando-color-text-body');
      document.getElementById('text-caption').textContent = styles.getPropertyValue('--sando-color-text-caption');
    }

    // Initial update
    updateColors();

    // Listen for system theme changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateColors);
    window.matchMedia('(prefers-color-scheme: light)').addEventListener('change', updateColors);
  </script>
</body>
</html>
