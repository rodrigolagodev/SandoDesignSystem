meta:
  doc_id: "API"
  category: "06-documentation"
  version: "1.0.0"
  status: "Active"
  last_updated: "2025-11-09"
  owner: "Technical Writer"

purpose:
  id: "API-PU"
  description: |
    Establish comprehensive standards for documenting component APIs in the Sando Design System, ensuring developers can quickly understand and use components through clear, consistent, and complete reference documentation. This includes JSDoc annotations, property tables, event documentation, CSS custom properties, and type definitions.

targets:
  id: "API-TGT"
  list:
    - "All public components, mixins, and utilities"

scope:
  id: "API-SC"
  note: "JSDoc comments, VitePress API tables, TypeScript types, usage examples"

enforcement:
  id: "API-ENF"
  note: "Code review, documentation build validation"

core_rules:
  - id: "API-CR-R1"
    title: "Comprehensive JSDoc Component Headers (Non-Negotiable)"
    summary: "Every component file MUST include a complete JSDoc header with @element, description, @slot, @fires, @cssprop tags, and usage examples."
    pattern:
      lang: "typescript"
      title: "JSDoc component header structure"
      code: |
        /**
         * Component Name and Brief Description
         *
         * Extended description explaining purpose, features, and when to use.
         * Multiple paragraphs allowed for complex components.
         *
         * @element tag-name
         *
         * @slot - Default slot description
         * @slot named-slot - Named slot description
         *
         * @fires event-name - Event description with payload details
         *
         * @cssprop --component-property - CSS custom property description
         *
         * @example Basic usage
         * <tag-name attribute="value">Content</tag-name>
         *
         * @example Advanced pattern
         * <tag-name>
         * <element slot="named-slot">Content</element>
         * </tag-name>
         */
    real_example:
      lang: "typescript"
      title: "From sando-button.ts"
      code: |
        /**
         * Sando Button Component
         *
         * A fully accessible button component built with Lit following industry standards.
         * Supports multiple variants, sizes, states, and can render as button or link.
         *
         * @element sando-button
         *
         * @slot - Button content (text, icons, etc.)
         * @slot icon-start - Icon before the button text (alternative: use start-icon prop)
         * @slot icon-end - Icon after the button text (alternative: use end-icon prop)
         *
         * @fires click - Fired when the button is clicked (unless disabled)
         *
         * @cssprop --sando-button-fontFamily - Button font family
         * @cssprop --sando-button-fontWeight - Button font weight
         * @cssprop --sando-button-borderRadius - Button border radius
         * @cssprop --sando-button-transition-duration - Transition duration
         *
         * @example Basic usage with variants
         * <sando-button variant="solid" size="medium">Solid</sando-button>
         * <sando-button variant="outline">Outline</sando-button>
         *
         * @example With icons (slot method)
         * <sando-button>
         * <span slot="icon-start">‚≠ê</span>
         * Favorite
         * </sando-button>
         *
         * @example As link
         * <sando-button href="httpss://example.com" target="_blank">
         * Visit Site
         * </sando-button>
         */
    why: "JSDoc serves as the single source of truth for component API. IDEs show this documentation on hover, documentation generators extract it, and it stays synchronized with code."
    references:
      - type: "source_file"
        path: "sando-button.ts"
        lines: "1-61"
        note: "Complete JSDoc header example"
      - type: "guideline"
        doc_id: "CS"
        file: "../03-development/CODE_STYLE.toon"
        note: "JSDoc standards"

  - id: "API-CR-R2"
    title: "Complete Property Tables in VitePress (Required)"
    summary: "Every component guide in VitePress MUST include a comprehensive Properties table with columns: Property, Type, Default, Description."
    api_specification:
      title: "VitePress property table structure"
      summary: "API Reference"
      properties:
        - name: "propertyName"
          type: "'value1' | 'value2'"
          default: "'value1'"
          description: "Human-readable description of what this property does"
        - name: "booleanProp"
          type: "boolean"
          default: "false"
          description: "Description of boolean behavior"
        - name: "optionalProp"
          type: "string"
          default: "undefined"
          description: "Description (note: undefined means optional)"
    type_notation_conventions:
      - "Union types: 'solid' | 'outline' | 'ghost'"
      - "Literal escape: Use backticks and | for pipe character"
      - "Boolean: boolean (lowercase)"
      - "Optional: Show undefined as default"
      - "Complex types: Link to TypeScript definition"
    api_specification_example:
      title: "From button.md"
      properties:
        - name: "variant"
          type: "'solid' | 'outline' | 'ghost' | 'text'"
          default: "'solid'"
          description: "Visual style variant"
        - name: "size"
          type: "'xs' | 'small' | 'medium' | 'large'"
          default: "'medium'"
          description: "Button size (all WCAG compliant)"
        - name: "disabled"
          type: "boolean"
          default: "false"
          description: "Whether the button is disabled"
        - name: "href"
          type: "string"
          default: "undefined"
          description: "URL (renders as `<a>` instead of `<button>`)"
        - name: "ariaLabel"
          type: "string"
          default: "null"
          description: "Accessible label (overrides visible text)"
    why: "Tables provide scannable reference format. Developers can quickly find property types, defaults, and usage without reading full documentation."
    reference:
      type: "source_file"
      path: "apps/site/components/button.md"
      lines: "254-278"
      note: "Complete property table example"

  - id: "API-CR-R3"
    title: "Inline Property JSDoc with @default Tag (Required)"
    summary: "Every @property decorator MUST have JSDoc comment with description and @default tag showing the default value."
    pattern:
      lang: "typescript"
      title: "Property JSDoc patterns"
      code: |
        /**
         * Human-readable description of what this property does.
         * Can be multiple lines for complex behavior.
         * @default 'defaultValue'
         */
        @property({ reflect: true })
        propertyName: PropertyType = 'defaultValue';

        /**
         * Boolean property description.
         * @default false
         */
        @property({ type: Boolean, reflect: true })
        booleanProperty = false;

        /**
         * Optional property (no default value).
         */
        @property({ reflect: true })
        optionalProperty?: string;
    real_examples:
      lang: "typescript"
      title: "From sando-button.ts"
      code: |
        /**
         * Visual style variant of the button
         * @default 'solid'
         */
        @property({ reflect: true })
        variant: ButtonVariant = 'solid';

        /**
         * Whether the button is disabled
         * @default false
         */
        @property({ type: Boolean, reflect: true })
        disabled = false;

        /**
         * URL to navigate to (renders as &lt;a&gt; instead of &lt;button&gt;)
         */
        @property({ reflect: true })
        href?: string;
    why: "Inline JSDoc keeps documentation synchronized with code. When property defaults change, @default tag must be updated. IDEs show this information on hover."
    reference:
      type: "source_file"
      path: "sando-button.ts"
      lines: "80-200"
      note: "Property JSDoc examples"

  - id: "API-CR-R4"
    title: "Slots, Events, and CSS Properties Documentation (Required)"
    summary: "Components MUST document slots, events, and CSS custom properties in both JSDoc header and VitePress API tables."
    api_slots_pattern:
      title: "Slots Pattern"
      slots:
        - name: "Default"
          description: "Default slot description (what goes in unnamed slot)"
        - name: "named-slot"
          description: "Named slot description and usage"
    api_events_pattern:
      title: "Events Pattern"
      events:
        - name: "event-name"
          type: "CustomEvent<PayloadType>"
          description: "When this event fires and what data it contains"
    api_css_pattern:
      title: "CSS Custom Properties Pattern"
      summary: |
        CSS Custom Properties
        Key CSS variables you can override:
      example:
        lang: "css"
        code: |
          /* Category: Base Styles */
          --component-property: /* Description and default value */

          /* Category: Variant-Specific */
          --component-variant-property: /* Description */
      note: "Full list of all CSS custom properties available in the component."
    real_example:
      title: "From button.md"
      api_slots_example:
        - name: "Default"
          description: "Button content (text, icons, etc.)"
        - name: "icon-start"
          description: "Icon or content before the button text"
        - name: "icon-end"
          description: "Icon or content after the button text"
      api_events_example:
        - name: "click"
          type: "CustomEvent"
          description: "Fired when button is clicked (unless disabled or loading)"
      api_css_example:
        summary: "CSS Custom Properties"
        example:
          lang: "css"
          code: |
            /* Base styles */
            --sando-button-fontFamily
            --sando-button-fontWeight
            --sando-button-borderRadius
            --sando-button-transition-duration

            /* Variant-specific: solid */
            --sando-button-solid-backgroundColor-default
            --sando-button-solid-textColor-default
    why: "Complete API reference requires slots, events, and CSS properties. Developers need to know customization points and interaction patterns."
    references:
      - type: "source_file"
        path: "apps/site/components/button.md"
        lines: "279-299"
        note: "Complete API tables"
      - type: "source_file"
        path: "sando-button.ts"
        lines: "9-18"
        note: "JSDoc slot/event documentation"

  - id: "API-CR-R5"
    title: "TypeScript Type Definitions with JSDoc (Required)"
    summary: "All exported types MUST have JSDoc comments explaining their purpose, allowed values, and usage context."
    pattern:
      lang: "typescript"
      title: "Type definition documentation"
      code: |
        /**
         * Type description explaining what this type represents and where it's used.
         *
         * @example
         * const variant: ComponentVariant = 'solid';
         */
        export type ComponentVariant = 'value1' | 'value2' | 'value3';

        /**
         * Interface description with property explanations.
         */
        export interface ComponentConfig {
          /**
           * Property description
           * @default 'defaultValue'
           */
          propertyName: string;

          /**
           * Optional property description
           */
          optionalProperty?: boolean;
        }
    real_example:
      lang: "typescript"
      title: "From sando-button.types.ts"
      code: |
        /**
         * Visual style variant of the button.
         *
         * - `solid`: High emphasis with filled background (default)
         * - `outline`: Medium emphasis with border
         * - `ghost`: Low emphasis without background or border
         * - `text`: Minimal text-only style for inline links
         */
        export type ButtonVariant = "solid" | "outline" | "ghost" | "text";

        /**
         * Size variants for the button.
         *
         * All sizes meet WCAG 2.1 Level AA minimum touch target size (44x44px).
         *
         * - `xs`: Extra small for compact interfaces
         * - `small`: Small for tight spaces
         * - `medium`: Default size for most use cases
         * - `large`: Large for primary actions
         */
        export type ButtonSize = "xs" | "small" | "medium" | "large";
    why: "Type definitions are part of public API. JSDoc comments explain allowed values, constraints, and usage patterns. Documentation generators extract this information."
    references:
      - type: "source_file"
        path: "sando-button.types.ts"
        note: "Type definition examples"
      - type: "guideline"
        doc_id: "NC"
        file: "../03-development/NAMING_CONVENTIONS.toon"
        note: "TypeScript conventions"

vitepress_structure:
  id: "API-VPS"
  standard_template:
    id: "API-VPS-ST"
    lang: "markdown"
    code: |
      # Component Name

      Brief one-sentence description of the component.

      ## Features

      - ‚úÖ **Feature 1**: Description
      - ‚ôø **Accessibility**: WCAG compliance level
      - üé® **Themeable**: Token-driven styling
      - üîí **Type Safe**: Full TypeScript support
      - ‚ö° **Performant**: Bundle size

      ## Basic Usage

      ```html
      <script type="module">
        import "@sando/components/component-name";
      </script>

      <component-name attribute="value">
        Content
      </component-name>
      ```

      ## Variants

      ### Variant 1 Name

      Description of what this variant does.

      ```html
      <component-name variant="variant1">Example</component-name>
      ```

      ### Variant 2 Name

      Description of what this variant does.

      ```html
      <component-name variant="variant2">Example</component-name>
      ```

      ## States

      ### State 1

      ```html
      <component-name state-attribute>Example</component-name>
      ```

      ## Theming

      ### Using Flavors

      ```html
      <component-name flavor="strawberry">Themed</component-name>
      ```

      ### Custom Styling

      ```html
      <component-name style="--component-property: custom-value;">
        Custom
      </component-name>
      ```

      ## API Reference

      ### Properties

      | Property | Type | Default | Description |
      |----------|------|---------|-------------|
      | ...      | ...  | ...     | ...         |

      ### Slots

      | Slot | Description |
      |------|-------------|
      | ...  | ...         |

      ### Events

      | Event | Type | Description |
      |-------|------|-------------|
      | ...   | ...  | ...         |

      ### CSS Custom Properties

      ```css
      /* List of customizable variables */
      ```

      ## Accessibility

      - ‚úÖ WCAG criterion met
      - ‚úÖ Keyboard navigation details
      - ‚úÖ Screen reader support
      - ‚ö†Ô∏è Important accessibility considerations

      ## Examples

      ### Complex Example 1

      Description of the example.

      ```html
      <example-code></example-code>
      ```

      ### Complex Example 2

      Description of the example.

      ```html
      <example-code></example-code>
      ```

      ## Best Practices

      - ‚úÖ DO: Recommended pattern
      - ‚ùå DON'T: Anti-pattern to avoid

      ## Framework Integration

      ### React

      ```tsx
      import "@sando/components/component-name";

      function App() {
        return <component-name attribute="value">Content</component-name>;
      }
      ```

      ### Vue 3

      ```vue
      <template>
        <component-name attribute="value">Content</component-name>
      </template>
      ```
  why: "Consistent structure helps developers find information quickly. Template ensures all components document the same sections in the same order."
  reference:
    type: "source_file"
    path: "apps/site/components/button.md"
    note: "Complete structure example"

property_patterns:
  id: "API-PP"
  string_union_types:
    id: "API-PP-SUT"
    typescript_pattern:
      lang: "typescript"
      code: |
        /**
         * Visual style variant.
         * @default 'solid'
         */
        @property({ reflect: true })
        variant: 'solid' | 'outline' | 'ghost' = 'solid';
    vitepress_table:
      lang: "markdown"
      code: |
        | `variant` | `'solid' \| 'outline' \| 'ghost'` | `'solid'` | Visual style variant |
  boolean_properties:
    id: "API-PP-BP"
    typescript_pattern:
      lang: "typescript"
      code: |
        /**
         * Whether the button is disabled.
         * @default false
         */
        @property({ type: Boolean, reflect: true })
        disabled = false;
    vitepress_table:
      lang: "markdown"
      code: |
        | `disabled` | `boolean` | `false` | Whether the button is disabled |
  optional_properties:
    id: "API-PP-OP"
    typescript_pattern:
      lang: "typescript"
      code: |
        /**
         * URL to navigate to (renders as &lt;a&gt; instead of &lt;button&gt;).
         */
        @property({ reflect: true })
        href?: string;
    vitepress_table:
      lang: "markdown"
      code: |
        | `href` | `string` | `undefined` | URL (renders as `<a>` instead of `<button>`) |
    note: "Use undefined to indicate optional properties in Default column."
  number_properties:
    id: "API-PP-NP"
    typescript_pattern:
      lang: "typescript"
      code: |
        /**
         * Tab index for keyboard navigation.
         * @default 0
         */
        @property({ type: Number, reflect: true })
        tabindex = 0;
    vitepress_table:
      lang: "markdown"
      code: |
        | `tabindex` | `number` | `0` | Tab index for keyboard navigation |
  complex_object_properties:
    id: "API-PP-COP"
    typescript_pattern:
      lang: "typescript"
      code: |
        /**
         * Configuration object for advanced behavior.
         * See {@link ComponentConfig} for details.
         */
        @property({ type: Object })
        config?: ComponentConfig;
    vitepress_table:
      lang: "markdown"
      code: |
        | `config` | `ComponentConfig` | `undefined` | Configuration object (see [ComponentConfig](#componentconfig)) |
    type_definition:
      lang: "markdown"
      code: |
        #### ComponentConfig

        ```typescript
        interface ComponentConfig {
          propertyA: string;
          propertyB: boolean;
        }
        ```

event_patterns:
  id: "API-EP"
  custom_events:
    id: "API-EP-CE"
    component_implementation:
      lang: "typescript"
      code: |
        /**
         * Dispatched when selection changes.
         */
        private dispatchChangeEvent() {
          this.dispatchEvent(
            new CustomEvent('change', {
              detail: { value: this.value },
              bubbles: true,
              composed: true,
            })
          );
        }
    jsdoc_header:
      lang: "typescript"
      code: |
        /**
         * @fires change - Fired when selection changes
         * @fires change.detail - { value: string } - The new value
         */
    vitepress_table:
      lang: "markdown"
      code: |
        ### Events

        | Event    | Type                             | Description                                                                   |
        | -------- | -------------------------------- | ----------------------------------------------------------------------------- |
        | `change` | `CustomEvent<{ value: string }>` | Fired when selection changes. Contains the new value in `event.detail.value`. |
  native_events:
    id: "API-EP-NE"
    jsdoc_header:
      lang: "typescript"
      code: |
        /**
         * @fires click - Native click event (fired unless disabled or loading)
         */
    vitepress_table:
      lang: "markdown"
      code: |
        | `click` | `MouseEvent` | Native click event (only fires when not disabled or loading) |

css_properties_documentation:
  id: "API-CPD"
  grouping_by_category:
    id: "API-CPD-GBC"
    lang: "markdown"
    code: |
      ### CSS Custom Properties

      #### Base Styles

      Variables that apply to all variants:

      ```css
      --component-fontFamily
      --component-fontSize
      --component-fontWeight
      --component-lineHeight
      ```

      #### Variant-Specific: Solid

      ```css
      --component-solid-backgroundColor-default
      --component-solid-backgroundColor-hover
      --component-solid-textColor-default
      ```

      #### Variant-Specific: Outline

      ```css
      --component-outline-borderColor-default
      --component-outline-borderColor-hover
      --component-outline-textColor-default
      ```

      #### State-Specific

      ```css
      --component-disabled-opacity
      --component-loading-spinnerColor
      ```
  why: "Grouping helps developers find the right CSS variable. Categories match component structure (base, variants, states)."
  token_consumption:
    id: "API-CPD-TC"
    lang: "markdown"
    code: |
      ### Design Tokens

      This component consumes tokens from the `button` Recipe:

      - `--sando-button-solid-backgroundColor-default`
      - `--sando-button-solid-backgroundColor-hover`
      - `--sando-button-solid-textColor-default`

      See [Token Architecture](../../design-system/tokens) for the complete three-layer system.
  token_consumption_why: "Helps designers understand token usage and enables refactoring. Links component implementation to design system foundations."

slot_patterns:
  id: "API-SP"
  default_slot:
    id: "API-SP-DS"
    jsdoc:
      lang: "typescript"
      code: |
        /**
         * @slot - Default slot for button content (text, icons, HTML)
         */
    vitepress_table:
      lang: "markdown"
      code: |
        | Default | Button content (text, icons, HTML elements) |
  named_slots:
    id: "API-SP-NS"
    jsdoc:
      lang: "typescript"
      code: |
        /**
         * @slot icon-start - Icon or content before the button text
         * @slot icon-end - Icon or content after the button text
         */
    vitepress_table:
      lang: "markdown"
      code: |
        | `icon-start` | Icon or content before the button text |
        | `icon-end`   | Icon or content after the button text  |
    usage_example:
      lang: "html"
      code: |
        <sando-button>
          <svg slot="icon-start">...</svg>
          Button Text
          <span slot="icon-end">‚Üí</span>
        </sando-button>

accessibility_documentation:
  id: "API-AD"
  wcag_compliance_table:
    id: "API-AD-WCT"
    lang: "markdown"
    code: |
      ## Accessibility

      | WCAG Criterion           | Level | Status  | Implementation                                |
      | ------------------------ | ----- | ------- | --------------------------------------------- |
      | 1.4.3 Contrast (Minimum) | AA    | ‚úÖ Pass | All text meets 4.5:1 contrast ratio           |
      | 2.1.1 Keyboard           | A     | ‚úÖ Pass | Fully keyboard accessible (Tab, Enter, Space) |
      | 2.4.7 Focus Visible      | AA    | ‚úÖ Pass | Visible focus indicator with 3:1 contrast     |
      | 4.1.2 Name, Role, Value  | A     | ‚úÖ Pass | Proper role, accessible name, and states      |
  keyboard_navigation:
    id: "API-AD-KN"
    lang: "markdown"
    code: |
      ### Keyboard Navigation

      | Key                | Action                               |
      | ------------------ | ------------------------------------ |
      | `Tab`              | Move focus to/from button            |
      | `Enter` or `Space` | Activate button                      |
      | `Escape`           | (For dialogs) Close and return focus |
  screen_reader_support:
    id: "API-AD-SRS"
    lang: "markdown"
    code: |
      ### Screen Reader Support

      - ‚úÖ Announces button role and accessible name
      - ‚úÖ Announces disabled state ("dimmed" or "unavailable")
      - ‚úÖ Announces loading state via `aria-busy="true"`
      - ‚úÖ Announces toggle state via `aria-pressed` (when toggle enabled)
      - ‚ö†Ô∏è Icon-only buttons MUST have `aria-label` attribute

examples_documentation:
  id: "API-ED"
  basic_example_pattern:
    id: "API-ED-BEP"
    lang: "markdown"
    code: |
      ### Example Title

      Brief description of what this example demonstrates.

      ```html
      <component-name attribute="value">
        Content
      </component-name>
      ```

      **Result**: What the user sees or experiences.
  interactive_javascript:
    id: "API-ED-IJ"
    lang: "markdown"
    code: |
      ### Dynamic Example

      Shows how to update properties programmatically.

      ```html
      <sando-button id="my-button">Click Me</sando-button>

      <script>
        const button = document.getElementById('my-button');
        let count = 0;

        button.addEventListener('click', () => {
          count++;
          button.textContent = `Clicked ${count} times`;
        });
      </script>
      ```
  framework_specific:
    id: "API-ED-FS"
    react_example:
      lang: "markdown"
      code: |
        ### React Example

        ```tsx
        import { useRef } from 'react';
        import '@sando/components/button';

        function App() {
          const buttonRef = useRef<HTMLElement>(null);

          return (
            <sando-button
              ref={buttonRef}
              variant="solid"
              onClick={() => console.log('Clicked')}
            >
              Click Me
            </sando-button>
          );
        }
        ```
    vue_example:
      lang: "markdown"
      code: |
        ### Vue 3 Example

        ```vue
        <template>
          <sando-button variant="solid" @click="handleClick">
            Click Me
          </template>

        <script setup lang="ts">
        const handleClick = () => console.log("Clicked");
        </script>
        ```

related_guidelines:
  - type: "guideline"
    doc_id: "CS"
    file: "../03-development/CODE_STYLE.toon"
    note: "JSDoc format standards"
  - type: "guideline"
    doc_id: "SBS"
    file: "./STORYBOOK_STORIES.toon"
    note: "Interactive documentation in Storybook"
  - type: "guideline"
    doc_id: "VPG"
    file: "./VITEPRESS_GUIDES.toon"
    note: "Long-form tutorial writing"
  - type: "guideline"
    doc_id: "NC"
    file: "../03-development/NAMING_CONVENTIONS.toon"
    note: "Property and type naming"
  - type: "guideline"
    doc_id: "WC"
    file: "../04-accessibility/WCAG_COMPLIANCE.toon"
    note: "Accessibility requirements"

external_references:
  - category: "JSDoc"
    references:
      - url: "httpss://jsdoc.app/"
        note: "JSDoc Official - Tag reference"
      - url: "httpss://typedoc.org/"
        note: "TypeDoc - TypeScript documentation generator"
      - url: "httpss://custom-elements-manifest.open-wc.org/"
        note: "Custom Elements Manifest - Web Components analyzer"
  - category: "VitePress"
    references:
      - url: "httpsVitePress://vitepress.dev/guide/markdown"
        note: " Markdown - Markdown features"
      - url: "httpss://www.markdownguide.org/extended-syntax/#tables"
        note: "Markdown Tables - Table syntax"
  - category: "Web Components"
    references:
      - url: "httpss://developer.mozilla.org/en-US/docs/Web/Web_Components"
        note: "MDN Web Components - Custom elements API"
      - url: "httpss://lit.dev/docs/"
        note: "Lit Documentation - Lit-specific patterns"