/**
 * Storybook Preview Global Styles
 *
 * Applies Storybook-specific layout and MDX documentation styles.
 * 
 * IMPORTANT: This file does NOT contain any --sando-* token overrides.
 * All component tokens come exclusively from the generated CSS in:
 *   packages/tokens/dist/sando-tokens/css/
 *
 * Includes:
 * - Base styles for html/body (layout only)
 * - MDX documentation styles (always light for readability)
 * - Table, badge, and code block styles
 * - Demo box classes for visual examples
 *
 * ============================================================
 * Token Usage Rules
 * ============================================================
 *
 * Components: Use --sando-* tokens from dist CSS files
 * MDX docs: Use --sb-docs-* tokens defined in this file
 *
 * ✅ CORRECT (for MDX docs):
 *   color: var(--sb-docs-text-caption)
 *   background: var(--sb-docs-bg-emphasis)
 *
 * ✅ CORRECT (for components - consumed from dist):
 *   color: var(--sando-color-action-outline-text-default)
 *
 * Token Mapping (for MDX only):
 * | Sando Token (components)             | SB Docs Token (MDX)       |
 * |--------------------------------------|---------------------------|
 * | --sando-color-text-heading           | --sb-docs-text-heading    |
 * | --sando-color-text-body              | --sb-docs-text-body       |
 * | --sando-color-background-base        | --sb-docs-bg-base         |
 * | --sando-color-border-muted           | --sb-docs-border          |
 */

/* ========================================
   Base Styles - Reset and defaults
   ======================================== */

/**
 * CRITICAL: Prevent color/background transitions on core elements
 * 
 * The @storybook/addon-themes decorator uses React's useEffect to set
 * the data-color-mode attribute AFTER the story renders. This can cause
 * a visible flash/flicker when switching themes.
 * 
 * We disable color/background transitions on ALL Storybook layout elements
 * to make the theme switch appear instant while still allowing component 
 * animations within stories.
 * 
 * Coverage includes:
 * - html, body: Document root
 * - #storybook-root: Story container
 * - .sb-show-main, .sb-main-padded: Storybook main wrappers
 * - [data-color-mode]: Any element with the theme attribute
 */
html,
body,
#storybook-root,
.sb-show-main,
.sb-main-padded,
[data-color-mode] {
  transition:
    background 0s,
    background-color 0s,
    color 0s,
    border-color 0s !important;
}

html,
body {
  margin: 0;
  padding: 0;
}

/* Apply background color from design tokens to html (where attributes are set) */
html {
  background-color: var(--sando-color-background-base);
  color: var(--sando-color-text-body);
  font-family: var(--sando-font-family-body);
  min-height: 100%;
}

/* Body inherits from html */
body {
  background-color: inherit;
  color: inherit;
  font-family: inherit;
  min-height: 100vh;
}

/* Ensure preview root has full height */
#storybook-root {
  min-height: 100vh;
  padding: 2rem;
  background-color: inherit;
}

/* ========================================
   MDX Documentation Styles
   
   MDX pages (Welcome, Status, etc.) should ALWAYS be readable.
   We force light mode styling for documentation pages to ensure
   text is always visible against a light background.
   ======================================== */

/* MDX Container - Force light, neutral background for readability */
.sbdocs-wrapper {
  background: var(--sb-docs-bg-base) !important;
  color: var(--sb-docs-text-body) !important;
}

.sbdocs-content {
  max-width: 900px !important;
  color: inherit;
}

/* MDX Text Elements - Force readable colors */
.sbdocs h1,
.sbdocs h2,
.sbdocs h3,
.sbdocs h4,
.sbdocs h5,
.sbdocs h6 {
  color: var(--sb-docs-text-heading) !important;
}

.sbdocs p,
.sbdocs li,
.sbdocs span {
  color: var(--sb-docs-text-body);
}

.sbdocs a {
  color: var(--sb-docs-link);
}

.sbdocs a:hover {
  color: var(--sb-docs-link-hover);
}

.sbdocs a:active {
  color: #7c2d12; /* orange-900 */
}

/* ----------------------------------------
   Table Styles (for all MDX tables)
   Force light mode colors for readability
   ---------------------------------------- */
.sbdocs table,
.docs-story table,
.sb-unstyled table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
  font-size: 0.875rem;
  background-color: var(--sb-docs-bg-raised);
  border: 1px solid var(--sb-docs-border);
  border-radius: 4px;
  overflow: hidden;
}

.sbdocs table th,
.docs-story table th,
.sb-unstyled table th {
  background: var(--sb-docs-bg-emphasis);
  font-weight: 600;
  color: var(--sb-docs-text-heading);
  padding: 0.75rem 1rem;
  text-align: left;
  border-bottom: 2px solid var(--sb-docs-border-emphasis);
}

.sbdocs table td,
.docs-story table td,
.sb-unstyled table td {
  padding: 0.75rem 1rem;
  text-align: left;
  border-bottom: 1px solid var(--sb-docs-border);
  color: var(--sb-docs-text-body);
  background-color: var(--sb-docs-bg-raised);
}

.sbdocs table tr:hover td,
.docs-story table tr:hover td,
.sb-unstyled table tr:hover td {
  background: var(--sb-docs-bg-emphasis);
}

.sbdocs table code,
.docs-story table code,
.sb-unstyled table code {
  background: var(--sb-docs-code-bg);
  padding: 0.125rem 0.375rem;
  border-radius: 4px;
  font-size: 0.8125rem;
  font-family: var(--sando-font-family-code, "Fira Code", monospace);
  color: var(--sb-docs-code-text);
}

/* ----------------------------------------
   Status Badges (reusable)
   Using CSS variables for consistency
   ---------------------------------------- */
.status-badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
}

/* Stable - Green */
.status-stable {
  background: var(--sb-docs-success-bg);
  color: var(--sb-docs-success-text);
}

/* Beta - Amber/Warning */
.status-beta {
  background: var(--sb-docs-warning-bg);
  color: var(--sb-docs-warning-text);
}

/* Planned - Neutral */
.status-planned {
  background: var(--sb-docs-bg-emphasis);
  color: var(--sb-docs-text-caption);
}

/* New - Blue/Info */
.status-new {
  background: var(--sb-docs-info-bg);
  color: var(--sb-docs-info-text);
}

/* Deprecated - Red/Error */
.status-deprecated {
  background: var(--sb-docs-error-bg);
  color: var(--sb-docs-error-text);
}

/* ----------------------------------------
   Check/Status Icons
   ---------------------------------------- */
.status-check {
  color: var(--sb-docs-success-text);
  font-weight: 600;
}

.status-partial {
  color: var(--sb-docs-warning-text);
  font-weight: 600;
}

.status-missing {
  color: var(--sb-docs-text-caption);
}

/* ----------------------------------------
   Interactive Examples / Component Preview
   These MUST follow the color mode since they show actual components.
   Uses dynamic --sando-color-* tokens so components render correctly
   in light/dark/high-contrast modes.
   ---------------------------------------- */
.sbdocs-preview,
.docs-story {
  background: var(--sando-color-background-base) !important;
  border: 1px solid var(--sando-color-border-muted) !important;
  border-radius: 8px;
}

/* Canvas wrapper */
.sb-story {
  background: var(--sando-color-background-base);
  padding: 2rem;
}

/* ----------------------------------------
   Code Blocks - Force light mode for MDX
   ---------------------------------------- */
.sbdocs pre {
  background: var(--sb-docs-bg-code) !important;
  border: 1px solid var(--sb-docs-border);
  border-radius: 8px;
  padding: 1rem;
  overflow-x: auto;
}

.sbdocs pre code {
  background: transparent !important;
  padding: 0;
  color: var(--sb-docs-code-text);
  font-family: var(--sando-font-family-code, "Fira Code", monospace);
}

/* Inline code in paragraphs */
.sbdocs p code,
.sbdocs li code {
  background: var(--sb-docs-code-bg);
  padding: 0.125rem 0.375rem;
  border-radius: 4px;
  font-size: 0.875em;
  font-family: var(--sando-font-family-code, "Fira Code", monospace);
  color: var(--sb-docs-code-text);
}

/* ----------------------------------------
   Storybook Controls Panel (in docs)
   ---------------------------------------- */
.docblock-argstable {
  background: var(--sb-docs-bg-raised) !important;
}

.docblock-argstable th {
  background: var(--sb-docs-bg-emphasis) !important;
  color: var(--sb-docs-text-heading) !important;
}

.docblock-argstable td {
  background: var(--sb-docs-bg-raised) !important;
  color: var(--sb-docs-text-body) !important;
  border-bottom-color: var(--sb-docs-border) !important;
}

/* ----------------------------------------
   Storybook Source Code Block
   ---------------------------------------- */
.docblock-source {
  background: var(--sb-docs-bg-emphasis) !important;
  border-color: var(--sb-docs-border) !important;
}

/* ----------------------------------------
   Blockquotes and callouts
   ---------------------------------------- */
.sbdocs blockquote {
  background: var(--sb-docs-bg-emphasis);
  border-left: 4px solid var(--sb-docs-link);
  color: var(--sb-docs-text-body);
  padding: 1rem;
  margin: 1rem 0;
}

/* ----------------------------------------
   Horizontal rules
   ---------------------------------------- */
.sbdocs hr {
  border: none;
  border-top: 1px solid var(--sb-docs-border);
  margin: 2rem 0;
}

/* ========================================
   Storybook Docs Theme Variables
   
   These CSS custom properties define the docs theme colors.
   Using variables instead of hardcoded hex values makes the
   theme maintainable and easy to update.
   
   All colors are based on the Sando neutralWarm palette
   but defined statically for consistent docs appearance.
   ======================================== */
:root {
  /* Docs Background colors */
  --sb-docs-bg-base: #fafaf9; /* neutralWarm-100 */
  --sb-docs-bg-surface: #f5f5f4; /* neutralWarm-200 */
  --sb-docs-bg-raised: #ffffff; /* white */
  --sb-docs-bg-emphasis: #f5f5f4; /* neutralWarm-200 - softer, WCAG approved */
  --sb-docs-bg-code: #fafaf9; /* neutralWarm-100 - matches base per user request */

  /* Docs Text colors */
  --sb-docs-text-heading: #0c0a09; /* neutralWarm-950 */
  --sb-docs-text-body: #292524; /* neutralWarm-800 */
  --sb-docs-text-caption: #44403c; /* neutralWarm-700 - WCAG AAA 8.5:1 */
  --sb-docs-text-muted: #57534e; /* neutralWarm-600 - WCAG AA 6.0:1 */

  /* Docs Border colors */
  --sb-docs-border: #d6d3d1; /* neutralWarm-300 */
  --sb-docs-border-emphasis: #a8a29e; /* neutralWarm-400 */

  /* Docs Link colors */
  --sb-docs-link: #c2410c; /* orange-700 */
  --sb-docs-link-hover: #9a3412; /* orange-800 */

  /* Docs Status colors */
  --sb-docs-success-bg: #dcfce7; /* green-100 */
  --sb-docs-success-text: #15803d; /* green-700 */
  --sb-docs-warning-bg: #fef3c7; /* amber-100 */
  --sb-docs-warning-text: #b45309; /* amber-700 */
  --sb-docs-error-bg: #fee2e2; /* red-100 */
  --sb-docs-error-text: #b91c1c; /* red-700 */
  --sb-docs-info-bg: #dbeafe; /* blue-100 */
  --sb-docs-info-text: #1d4ed8; /* blue-700 */

  /* Docs Code colors */
  --sb-docs-code-bg: #f0efee; /* subtle distinction from base - WCAG approved */
  --sb-docs-code-text: #292524; /* neutralWarm-800 */
}

/* ========================================
   Demo Box Classes
   
   Reusable classes for visual examples in MDX docs.
   These always use light-mode colors for consistency
   regardless of the color mode setting.
   ======================================== */

/* Base demo box - light background with proper contrast */
.demo-box {
  padding: 24px;
  background-color: var(--sb-docs-bg-emphasis);
  border-radius: 12px;
  color: var(--sb-docs-text-body);
  margin-top: 24px;
}

/* Demo box variant with border instead of background */
.demo-box--outlined {
  background-color: var(--sb-docs-bg-raised);
  border: 1px solid var(--sb-docs-border);
}

/* Demo box for showing layered/stacked content */
.demo-box--stacking {
  position: relative;
  min-height: 400px;
  background-color: var(--sb-docs-bg-surface);
  overflow: hidden;
  padding: 40px;
}

/* Demo box card - raised element within demo box */
.demo-card {
  padding: 16px 20px;
  background-color: var(--sb-docs-bg-raised);
  border-radius: 8px;
  border: 1px solid var(--sb-docs-border);
  color: var(--sb-docs-text-body);
}

/* Demo card with shadow for z-index demos */
.demo-card--elevated {
  border: none;
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -2px rgba(0, 0, 0, 0.1);
}

/* Demo label - small caption text */
.demo-label {
  font-family: monospace;
  font-size: 12px;
  color: var(--sb-docs-text-caption);
}

/* Demo title - bold text in demos */
.demo-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--sb-docs-text-heading);
  margin-bottom: 4px;
}

/* Demo description - secondary text */
.demo-description {
  font-size: 12px;
  color: var(--sb-docs-text-caption);
}

/* Code display in demos */
.demo-code {
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
  font-size: 12px;
  padding: 2px 6px;
  background-color: var(--sb-docs-code-bg);
  border-radius: 4px;
  color: var(--sb-docs-code-text);
}

/* Usage hint box */
.demo-usage {
  margin-top: 16px;
  padding: 12px;
  background-color: var(--sb-docs-bg-emphasis);
  border-radius: 8px;
  font-size: 14px;
  color: var(--sb-docs-text-body);
}

/* Token row - for displaying token lists */
.demo-token-row {
  display: flex;
  align-items: center;
  gap: 24px;
  padding: 16px;
  border-bottom: 1px solid var(--sb-docs-border);
}

.demo-token-row:last-child {
  border-bottom: none;
}

/* Overlay demo (dark semi-transparent) */
.demo-overlay {
  padding: 16px;
  background-color: rgba(0, 0, 0, 0.6);
  color: white;
  border-radius: 8px;
}

/* Toast/notification demo */
.demo-toast {
  padding: 16px 24px;
  background-color: #c2410c;
  color: white;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

/* Tooltip demo */
.demo-tooltip {
  padding: 8px 12px;
  background-color: #1c1917;
  color: white;
  border-radius: 6px;
  font-size: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

/* Button demo */
.demo-button {
  padding: 12px 24px;
  background-color: #c2410c;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
}

.demo-button:hover {
  background-color: #9a3412;
}

/* Dropdown menu demo */
.demo-dropdown {
  background-color: var(--sb-docs-bg-raised);
  border-radius: 8px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.demo-dropdown-item {
  padding: 12px 16px;
  font-size: 14px;
  color: var(--sb-docs-text-body);
  border-bottom: 1px solid var(--sb-docs-border);
  cursor: pointer;
}

.demo-dropdown-item:last-child {
  border-bottom: none;
}

.demo-dropdown-item:hover {
  background-color: var(--sb-docs-bg-emphasis);
}
