import { Meta } from "@storybook/blocks";
import { TokenArchitecture } from "../components/TokenArchitecture";

<Meta title="Getting Started/Theming" />

# üé® Theming System

The Sando Design System uses a **3-layer token architecture** that enables flexible theming through **Flavors**.

## Architecture Overview

<TokenArchitecture />

## Sando's Color Philosophy

Sando provides **8 curated color palettes** + **3 neutral variants**, all scientifically designed using OKLCH for guaranteed accessibility and perceptual uniformity.

**Why 8 palettes?**

- ‚úÖ Instant start (pick a palette, begin coding in 2 minutes)
- ‚úÖ Scientific design (OKLCH, perceptually uniform)
- ‚úÖ WCAG AA guaranteed (all palettes pass accessibility)
- ‚úÖ Cover 95% of use cases

## Available Flavors

Each flavor is inspired by a type of Japanese Sando (sandwich), with colors that evoke its ingredients and visual appeal.

### üçû Original (Default)

The classic Sando theme with warm, toasted bread tones:

- Warm backgrounds (`neutral-warm.100-200`)
- Dark text (`neutral-warm.800-950`)
- Orange brand colors for actions (`orange.600-800`)

**Palette:** Orange + Neutral Warm
**Use case:** Startups, creative agencies, food & beverage

### ü•ö Egg Salad (Yellow-based)

Creamy egg salad vibes with soft yellow tones:

- Light warm backgrounds (`neutral-warm.50-100`)
- Yellow primary actions (`yellow.500-700`)
- Cream accents

**Palette:** Yellow + Neutral Warm
**Use case:** Food & beverage, lifestyle, friendly brands

### üçñ Tonkatsu (Brown-based)

Crispy fried cutlet theme with rich brown tones:

- Warm cream backgrounds (`neutral-warm.50-100`)
- Brown brand colors (`brown.600-800`)
- Golden accents

**Palette:** Brown + Neutral Warm
**Use case:** Artisanal, craft, premium products

### üçì Strawberry (Red-based)

Fresh strawberry cream theme with red and pink tones:

- Light backgrounds (`neutral.50-100`)
- Red primary actions (`red.500-700`)
- Pink accents

**Palette:** Red + Neutral
**Use case:** Creative, playful, lifestyle brands

### ü•ù Kiwi (Green-based)

Vibrant kiwi fruit theme with fresh green tones:

- Cool backgrounds (`neutral.50-100`)
- Green brand colors (`green.600-800`)
- Fresh accents

**Palette:** Green + Neutral
**Use case:** Sustainability, health & wellness, nature

## How to Switch Flavors

### In Storybook

Use the **Flavor** toolbar button (üé®) at the top:

- ‚òÄÔ∏è Original (Light)
- üåô Original Dark

The entire UI will update instantly!

### In Your Application

#### Option 1: Import All Tokens (Recommended)

The simplest approach - imports everything including the Original flavor with all modes:

```javascript
// Includes: Ingredients + Original Flavor (all modes) + Recipes
import "@sando/tokens/css";
```

Dark mode is automatic via `prefers-color-scheme` media query!

#### Option 2: Add Additional Flavors

After the base import, add more flavors as needed:

```javascript
// Base import (includes Original)
import "@sando/tokens/css";

// Add extra flavors
import "@sando/tokens/css/flavors/strawberry";
import "@sando/tokens/css/flavors/kiwi";
import "@sando/tokens/css/flavors/tonkatsu";
import "@sando/tokens/css/flavors/egg-salad";
```

Then apply via the `flavor` attribute:

```html
<div flavor="strawberry">
  <sando-button>Strawberry themed!</sando-button>
</div>
```

#### Option 3: Dynamic Switching

For runtime theme switching (beyond light/dark which is automatic):

```javascript
// Dynamically load a flavor
async function loadFlavor(flavorName) {
  await import(`@sando/tokens/css/flavors/${flavorName}`);
}

// Example: theme selector
document.querySelector("#theme-select").addEventListener("change", (e) => {
  loadFlavor(e.target.value);
});
```

#### Option 4: System Preference (Automatic)

Dark mode works automatically via CSS media queries - no JavaScript needed! But if you want manual control:

```javascript
const prefersDark = window.matchMedia("(prefers-color-scheme: dark)");

// Check current preference
if (prefersDark.matches) {
  console.log("User prefers dark mode");
}

// Listen for changes
prefersDark.addEventListener("change", (e) => {
  console.log("Dark mode:", e.matches);
});
```

> üí° **Note:** Each flavor includes all color modes (light, dark, high-contrast, etc.) built-in. The browser automatically applies the right mode based on user preferences.

## Creating Custom Flavors

### Option 1: Using Our Curated Palettes (Recommended)

1. **Create JSON file:**

```json
// packages/tokens/src/flavors/lavender.json
{
  "color": {
    "action": {
      "solid": {
        "background": {
          "default": { "value": "{color.purple.600.value}", "type": "color" }
        }
      }
    },
    "background": {
      "base": { "value": "{color.neutral-cool.50.value}", "type": "color" }
    }
  }
}
```

2. **Build tokens:**

```bash
cd packages/tokens
pnpm build
```

3. **Use your flavor:**

```javascript
import "@sando/tokens/css/flavors/lavender.css";
```

### Option 2: Generate Brand-Specific Palette (Coming Soon)

<div
  style={{
    padding: "24px",
    background: "#FFF4E6",
    borderRadius: "8px",
    border: "2px solid #FFB020",
    marginTop: "24px",
  }}
>
  <h4 style={{ marginTop: 0, color: "#C77700" }}>
    ‚ö†Ô∏è Flavor Generator - Coming Soon
  </h4>
  <p>
    If none of our 8 palettes match your exact brand color, we're building a
    flavor generator:
  </p>
  <pre
    style={{
      background: "#2D2D2D",
      color: "#E6E6E6",
      padding: "16px",
      borderRadius: "6px",
      overflow: "auto",
    }}
  >
    <code>npx @sando/flavor-generator create --color "#FF6B00"</code>
  </pre>
  <p style={{ fontSize: "14px" }}>
    <strong>What it does:</strong>
    <br />
    ‚Ä¢ Generates a scientifically designed 11-step palette using OKLCH
    <br />
    ‚Ä¢ Validates WCAG AA accessibility automatically
    <br />
    ‚Ä¢ Creates light + dark mode flavor variants
    <br />‚Ä¢ Outputs ready-to-use token files
  </p>
  <p style={{ fontSize: "14px", marginBottom: 0 }}>
    <strong>Status:</strong> Under development | <strong>Timeline:</strong> Q2
    2025 | <strong>Priority:</strong> High
  </p>
</div>

## Token Customization

All flavors expose the same CSS custom properties, so components work with any flavor:

```css
/* These work in ANY flavor */
.my-component {
  background: var(--sando-color-background-base);
  color: var(--sando-color-text-body);
  padding: var(--sando-space-inset-default);
}
```

## Best Practices

### ‚úÖ DO

- Use semantic tokens from Flavors layer (`--sando-color-background-base`)
- Test components in both light and dark modes
- Ensure 4.5:1 contrast ratio for text
- Provide flavor switching UI for users

### ‚ùå DON'T

- Use primitive tokens directly (`--sando-color-neutral-700`) in components
- Hard-code color values
- Assume light mode only
- Ignore accessibility in dark mode

## Accessibility

All flavors are designed to meet **WCAG 2.1 Level AA**:

- Text contrast ratio ‚â• 4.5:1
- Interactive elements ‚â• 3:1
- Focus indicators clearly visible
- Tested with screen readers

## Performance

- **CSS size:** ~5-6 KB per flavor (gzipped)
- **Load time:** Instant with dynamic switching
- **Tree-shakeable:** Only load flavors you use
- **No JavaScript required:** Pure CSS

## Roadmap

Future flavors planned:

- üé® **High Contrast:** For accessibility
- üåà **Colorful:** Vibrant palette
- üíº **Corporate:** Professional/neutral
- üéÆ **Gaming:** Bold and energetic

---

**Questions?** Check out the [Ingredients](/?path=/docs/ingredients-overview--docs) and [Flavors](/?path=/docs/flavors-overview--docs) documentation.
